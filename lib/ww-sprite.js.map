{"version":3,"sources":["ww-sprite.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;IAUM,QAAQ;AACC,aADT,QAAQ,GACgB;YAAd,CAAC,gCAAG,CAAC;YAAE,CAAC,gCAAG,CAAC;;8BADtB,QAAQ;;AAEN,YAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,YAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,YAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACf,YAAI,CAAC,MAAM,GAAG,CAAC,CAAC;;AAEhB,YAAI,CAAC,GAAG,GAAG,EAAE,CAAC;AACd,YAAI,CAAC,GAAG,GAAG,EAAE,CAAC;;AAEd,YAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,iBAAiB,CAAC;AAC9C,YAAI,CAAC,GAAG,GAAG,EAAE,CAAC;;AAEd,YAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;KAChC;;iBAdC,QAAQ;;eAgBF,oBAAG;AACP,mCAAqB,IAAI,CAAC,CAAC,UAAK,IAAI,CAAC,CAAC,gBAAW,IAAI,CAAC,GAAG,CAAG;SAC/D;;;eAEe,0BAAC,GAAG,EAAE;AAClB,gBAAI,CAAC,2BAA2B,CAAC,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SAC7D;;;eAE0B,qCAAC,GAAG,EAAE,QAAQ,EAAE;;;AACvC,gBAAI,CAAC,GAAG,sBAAoB,GAAG,UAAK,QAAQ,CAAG,CAAC;;AAEhD,gBAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,gBAAI,AAAC,IAAI,CAAC,GAAG,IAAI,IAAI,IAAM,IAAI,CAAC,GAAG,IAAI,EAAE,AAAC,EAAE;AACxC,oBAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,oBAAI,QAAQ,GAAG,IAAI,KAAK,EAAE,CAAC;;AAE3B,wBAAQ,CAAC,MAAM,GAAI,UAAA,GAAG,EAAI;;AAEtB,0BAAK,GAAG,GAAG,GAAG,CAAC;AACf,0BAAK,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;AACvB,0BAAK,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;;AAEzB,wBAAI,QAAQ,EAAE;AACV,gCAAQ,CAAC,QAAQ,CAAC,CAAC;qBACtB;iBACJ,AAAC,CAAC;;AAEH,wBAAQ,CAAC,GAAG,GAAG,GAAG,CAAC;aACtB,MAAM;AACH,oBAAI,CAAC,OAAO,EAAE,CAAC;aAClB;SACJ;;;eAEY,uBAAC,GAAG,EAAE;AACf,gBAAI,CAAC,GAAG,CAAC,iBAAiB,GAAE,IAAI,CAAC,GAAG,CAAC,CAAC;;;;;;;;AAQtC,gBAAI,CAAC,OAAO,EAAE,CAAC;SAClB;;;;;eAQM,mBACP;AACI,gBAAI,CAAC,GAAG,gBAAc,IAAI,CAAC,GAAG,CAAG,CAAC;AAClC,gBAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,EACjC;AACI,oBAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACnC;SACJ;;;eAGE,aAAC,GAAG,EAAE;AACL,mBAAO,CAAC,GAAG,gBAAc,GAAG,CAAG,CAAC;SACnC;;;aAlBkB,aAAC,QAAQ,EAC5B;AACI,gBAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC;SACpC;;;WAhEC,QAAQ;;;AAkFd,QAAQ,CAAC,iBAAiB,GAAG,GAAG,CAAC;AACjC,QAAQ,CAAC,YAAY,GAAG,EAAE,CAAC;;qBAGZ,QAAQ","file":"ww-sprite.js","sourcesContent":["/**\n * Created by andrew on 7/7/15.\n */\n\n/**\n * Adds image loading, crude debugging and other generally useful functionality...\n * @author Andrew Rapo (andrew@worthwhilegames.org)\n * @license MIT\n */\n\nclass WwSprite {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n        this.width = 0;\n        this.height = 0;\n\n        this.img = {};\n        this.bmp = {};\n        //this.debug:WwDebug = WwDebug.instance;\n        this.scaleFactor = WwSprite.BASE_SCALE_FACTOR;\n        this.url = \"\";\n\n        this._onReadyCallback = null;\n    }\n\n    toString() {\n        return `WwSprite: (${this.x}, ${this.y}): url: ${this.url}`;\n    }\n\n    loadImageWithURL(url) {\n        this.loadImageWithURLAndCallback(url, this.onImageLoaded);\n    }\n\n    loadImageWithURLAndCallback(url, callback) {\n        this.log(`WwSprite: load: ${url}, ${callback}`);\n\n        this.url = url;\n        if ((this.url != null) && (this.url != \"\")) {\n            this.url = url;\n            var temp_img = new Image();\n\n            temp_img.onload = (img => {\n                //console.log(`Sprite: onLoad: ${callback}`);\n                this.img = img;\n                this.width = img.width;\n                this.height = img.height;\n\n                if (callback) {\n                    callback(temp_img);\n                }\n            });\n\n            temp_img.src = url;\n        } else {\n            this.onReady();\n        }\n    }\n\n    onImageLoaded(img) {\n        this.log(\"onImageLoaded: \"+ this.url);\n        //__bmp = event.target.content as Bitmap;\n        //removeChild(__img);\n        //__img = Image.fromBitmap(__bmp);\n        //resetScale();\n        //__img.alpha = 0.5;\n        //addChild(__img);\n        //__bmp = null;\n        this.onReady();\n    }\n\n    set onReadyCallback(callback)\n    {\n        this._onReadyCallback = callback;\n    }\n\n    // Override this\n    onReady()\n    {\n        this.log(`onReady:  ${this.url}`);\n        if (this._onReadyCallback != null)\n        {\n            this._onReadyCallback(this.url);\n        }\n    }\n\n\n    log(msg) {\n        console.log(`WwSprite: ${msg}`);\n    }\n}\n\nWwSprite.BASE_SCALE_FACTOR = 0.5;\nWwSprite.SPRITE_STAGE = {};\n\n\nexport default WwSprite;\n\n\n/*\n package org.wwlib.starling\n {\n\n import flash.display.Bitmap;\n import flash.display.Loader;\n import flash.display.MovieClip;\n import flash.events.Event;\n import flash.net.URLRequest;\n import flash.system.ImageDecodingPolicy;\n import flash.system.LoaderContext;\n\n import org.wwlib.utils.WwDebug;\n\n import starling.display.Image;\n import starling.display.Sprite;\n\n\n public class WwSprite extends Sprite\n {\n public static var __baseScaleFactor:Number = 0.5;\n public static var FLASH_STAGE:flash.display.MovieClip;\n\n protected var __img:Image;\n protected var __x:int;\n protected var __y:int;\n protected var __bmp:Bitmap;\n protected var __debug:WwDebug = WwDebug.instance;\n protected var __scaleFactor:Number = WwSprite.__baseScaleFactor;\n protected var __url:String;\n\n protected var __onReadyCallback:Function;\n\n public function WwSprite()\n {\n\n }\n\n public function loadImage(url:String):void\n {\n __url = url;\n if ((__url != null) && (__url != \"\"))\n {\n // create a LoaderContext\n var loaderContext:LoaderContext = new LoaderContext();\n // specify async decoding\n loaderContext.imageDecodingPolicy = ImageDecodingPolicy.ON_LOAD;\n // create a Loader\n var loader:Loader = new Loader();\n // inform the Loader\n loader.contentLoaderInfo.addEventListener(Event.COMPLETE,onImageLoaded);\n loader.load( new URLRequest(url), loaderContext );\n }\n else\n {\n onReady();\n }\n }\n\n protected function onImageLoaded(event:Event):void\n {\n //__debug.msg(\"onImageLoaded: \"+ __url);\n __bmp = event.target.content as Bitmap;\n removeChild(__img);\n __img = Image.fromBitmap(__bmp);\n resetScale();\n //__img.alpha = 0.5;\n addChild(__img);\n __bmp = null;\n onReady();\n }\n\n public function resetScale():void\n {\n __img.scaleX = __scaleFactor;\n __img.scaleY = __scaleFactor;\n }\n\n // Override this\n public function onReady():void\n {\n //__debug.msg(\"onReady: \" + __url);\n if (__onReadyCallback != null)\n {\n __onReadyCallback(__url);\n }\n }\n\n public function set image(img:Image):void\n {\n __img = img;\n }\n\n public function get image():Image\n {\n return __img;\n }\n\n public function get url():String\n {\n return __url;\n }\n\n public function set onReadyCallback(f:Function):void\n {\n __onReadyCallback = f;\n }\n\n public function clearImg():void\n {\n removeChild(__img);\n __img = null;\n\n }\n\n public override function dispose():void\n {\n removeChild(__img);\n __img = null;\n super.dispose();\n }\n }\n\n }\n */"],"sourceRoot":"/source/"}