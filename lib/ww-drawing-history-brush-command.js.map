{"version":3,"sources":["ww-drawing-history-brush-command.js"],"names":[],"mappings":"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","file":"ww-drawing-history-brush-command.js","sourcesContent":["/**\n * Created by andrew on 7/7/15.\n */\n\n/**\n * ...\n * @author Andrew Rapo (andrew@worthwhilegames.org)\n * @license MIT\n */\n\nimport Point from './point';;\nimport getTimer from './get-timer';\nimport WwBrush from './ww-brush';\n\n\nclass WwDrawingHistoryBrushCommand {\n    constructor(brush_id, location_point, time=null, uint_color=null, brush_scale=1.0, expansion_factor=1.0, blend_mode=\"normal\", alpha=1.0, rotation=0, layer_id=\"UNDER\", generated=false) {\n\n        this._brushId = brush_id;\n        this._location = location_point;\n        this._color = uint_color;\n        this._brushScale = brush_scale;\n        this.brushExpansionFactor = expansion_factor;\n        this.brushBlendMode = blend_mode;\n        this.executionTime = time;\n        this.brushAlpha = alpha;\n        this.brushRotation =rotation;\n        this.layerID = layer_id;\n        this.generatedCommand = generated;\n\n        this.unitId = null;\n        this.timeScale = 1.0;\n        this._brush = null;\n\n        if (this.executionTime == null) {\n            this.executionTime = getTimer();\n        }\n        this.normalizedExecutionTime = this.executionTime;\n    }\n\n    onReady() {\n        this.centerPivot();\n        super.onReady();\n\n        //__img.blendMode = BlendMode.NORMAL;\n        //__img.color = __color;\n    }\n\n    get brushID()\n    {\n        return this._brushID;\n    }\n\n    set brushID(value)\n    {\n        this._brushID = value;\n    }\n\n    get brush() {\n        return this._brush;\n    }\n\n    set brush(value) {\n        this._brush = value;\n    }\n\n    get location()\n    {\n        return this._location;\n    }\n\n    set location(value)\n    {\n        this._location = value;\n    }\n\n    get color()\n    {\n        return this._color;\n    }\n\n    set color(value)\n    {\n        this._color = value;\n    }\n\n    get brushScale()\n    {\n        return this._brushScale;\n    }\n\n    set brushScale(value)\n    {\n        this._brushScale = value;\n    }\n\n    toString()\n    {\n        let result = `WwDrawingHistoryBrushCommand\\n`;\n        result += `${this._brushId}\\n`;\n        result += `${this.unitId}\\n`;\n        result += `${this._location}\\n`;\n        result += `${this._color}\\n`;\n        result += `${this._brushScale}\\n`;\n        result += `${this.brushExpansionFactor}\\n`;\n        result += `${this.brushBlendMode}\\n`;\n        result += `${this.executionTime}\\n`;\n        result += `${this.brushAlpha}\\n`;\n        result += `${this.brushRotation}\\n`;\n        result += `${this.timeScale}\\n`;\n        result += `${this.layerID}\\n`;\n        result += `${this.generatedCommand}\\n`;\n        result += `${this._brush}\\n`;\n\n        return result;\n    }\n\n    dispose()\n    {\n        this._brush = null;\n        this.location = null;\n    }\n}\n\nexport default WwDrawingHistoryBrushCommand;\n\n/*\nimport flash.utils.getTimer;\n\nimport org.wwlib.starling.WwBrush;\nimport org.wwlib.utils.WwDebug;\n\nimport starling.display.BlendMode;\n\n\n    public class WwDrawingHistoryBrushCommand\n    {\n        private var __debug:WwDebug;\n        private var __brushID:String;\n        private var __brush:WwBrush;\n        private var __location:Point;\n        private var __uintColor:uint;\n        private var __brushScale:Number;\n        private var __brushExpansionFactor:Number = 1.0;\n        private var __brushBlendMode:String;\n        private var __executionTime:int;\n        private var __normalizedExecutionTime:int;\n        private var __brushAlpha:Number;\n        private var __brushRotation:Number;\n        private var __timeScale:Number = 1.0;\n        private var __layerID:String;\n        private var __generatedCommand:Boolean;\n        private var __unitID:int;\n        private var __lineLength:Number = 0;\n        private var __prevCommand:WwDrawingHistoryBrushCommand = null;\n        private var __rendered:Boolean = false;\n\n        private var __json:Object = null;\n\n        public function WwDrawingHistoryBrushCommand(_brushID:String, _location:Point=null, _uint_color:uint=0, _brush_scale:Number=1.0, _expansion_factor:Number=1.0, _blend_mode:String=\"normal\", _time:int=0, _alpha:Number=1.0, _rotation:Number=0, _layerID:String=\"UNDER\", _generated:Boolean=false):void\n    {\n        __debug = WwDebug.instance;\n        __brushID = _brushID;\n        __location = _location;\n        __uintColor = _uint_color;\n        __brushScale = _brush_scale;\n        __brushExpansionFactor = _expansion_factor;\n        __brushBlendMode = _blend_mode;\n        __executionTime = _time;\n        __brushAlpha = _alpha;\n        __brushRotation = _rotation;\n        __layerID = _layerID;\n        __generatedCommand = _generated;\n\n        if (__executionTime == 0) __executionTime = getTimer();\n        __normalizedExecutionTime = __executionTime;\n    }\n\n    public static function clone(_command:WwDrawingHistoryBrushCommand):WwDrawingHistoryBrushCommand\n    {\n        var _clone:WwDrawingHistoryBrushCommand = new WwDrawingHistoryBrushCommand(_command.brushID);\n\n        _clone.location = _command.location;\n        _clone.uintColor = _command.uintColor;\n        _clone.brushScale = _command.brushScale;\n        _clone.brushExpansionFactor = _command.brushExpansionFactor;\n        _clone.brushBlendMode = _command.brushBlendMode;\n        _clone.executionTime = _command.executionTime;\n        _clone.brushAlpha = _command.brushAlpha;\n        _clone.brushRotation = _command.brushRotation;\n        _clone.timeScale = _command.timeScale;\n        _clone.layerID = _command.layerID;\n        _clone.generatedCommand = _command.generatedCommand;\n        _clone.unitID = _command.unitID;\n        //_clone.lineLength = _command.lineLength;\n        //_clone.prevCommand = _command.prevCommand;\n        //_clone.rendered = _command.rendered;\n\n        return _clone;\n    }\n\n    public function dispose():void\n{\n    __brush = null;\n    __debug = null;\n    __location = null;\n}\n\npublic function debug():void\n    {\n        __debug.msg(\"Command: \" + __brushID, \"1\");\n__debug.msg(\" \" + __unitID, \"1\");\n__debug.msg(\" \" + __location, \"1\");\n__debug.msg(\" \" + __uintColor, \"1\");\n__debug.msg(\" \" + __brushScale, \"1\");\n__debug.msg(\" \" + __brushExpansionFactor, \"1\");\n__debug.msg(\" \" + __brushBlendMode, \"1\");\n__debug.msg(\" \" + __executionTime, \"1\");\n__debug.msg(\" \" + __brushAlpha, \"1\");\n__debug.msg(\" \" + __brushRotation, \"1\");\n__debug.msg(\" \" + __timeScale, \"1\");\n__debug.msg(\" \" + __layerID, \"1\");\n__debug.msg(\" \" + __generatedCommand, \"1\");\n__debug.msg(\" \" + __brush, \"1\");\n}\n\npublic function debugTime():String\n{\n    return \"  Command: \" + __unitID + \": \" + __executionTime + \"\\n\";\n}\n\npublic function get xml():String\n{\n    return \"  <command uid=\\\"\" + unitID + \"\\\" lid=\\\"\" + layerID + \"\\\" t=\\\"\" + __executionTime + \"\\\" bid=\\\"\" + __brushID + \"\\\" c=\\\"\" + __uintColor + \"\\\" s=\\\"\" + __brushScale + \"\\\" bm=\\\"\" + __brushBlendMode + \"\\\" a=\\\"\" + __brushAlpha + \"\\\" r=\\\"\" + __brushRotation + \"\\\" g=\\\"\" + __generatedCommand + \"\\\" x=\\\"\" + __location.x + \"\\\" y=\\\"\" + __location.y + \"\\\" />\\n\";\n}\n\npublic function get json():Object\n{\n    __json = new Object();\n    __json.uid = unitID;\n    __json.lid = layerID;\n    __json.t = __executionTime;\n    __json.bid = __brushID;\n    __json.c = __uintColor;\n    __json.s = __brushScale;\n    __json.bm = __brushBlendMode;\n    __json.a = __brushAlpha;\n    __json.r = __brushRotation;\n    __json.g = __generatedCommand;\n    __json.x = __location.x;\n    __json.y = __location.y;\n\n    return __json;\n}\n\npublic function setCurrentTime():void\n{\n    __executionTime = getTimer();\n}\n\npublic function get brush():WwBrush\n{\n    __brush = WwDrawingBrushManager.instance.getBrushFromBrushID(__brushID);\n\n    if (__brush)\n    {\n        __brush.brushScale = __brushScale * __brushExpansionFactor;\n\n        switch(__brushBlendMode)\n        {\n            case \"erase\": __brush.image.blendMode = BlendMode.ERASE;\n                break;\n\n            case \"normal\": __brush.image.blendMode = BlendMode.NORMAL;\n                break;\n\n            default: __brush.image.blendMode = BlendMode.NORMAL;\n                break;\n        }\n\n        __brush.image.color = __uintColor;\n        __brush.image.rotation = __brushRotation;\n        __brush.image.x = __location.x;\n        __brush.image.y = __location.y;\n        __brush.image.alpha = __brushAlpha;\n    }\n\n    return __brush;\n}\n\npublic function get brushID():String\n{\n    return __brushID;\n}\n\npublic function set brushID(value:String):void\n{\n    __brushID = value;\n}\n\n\npublic function get location():Point\n{\n    return __location;\n}\n\npublic function set location(value:Point):void\n{\n    __location = value;\n}\n\npublic function get uintColor():uint\n{\n    return __uintColor;\n}\n\npublic function set uintColor(value:uint):void\n{\n    __uintColor = value;\n}\n\npublic function get brushScale():Number\n{\n    return __brushScale;\n}\n\npublic function set brushScale(value:Number):void\n{\n    __brushScale = value;\n}\n\npublic function get brushExpansionFactor():Number\n{\n    return __brushExpansionFactor;\n}\n\npublic function set brushExpansionFactor(value:Number):void\n{\n    __brushExpansionFactor = value;\n}\n\npublic function get brushBlendMode():String\n{\n    return __brushBlendMode;\n}\n\npublic function set brushBlendMode(value:String):void\n{\n    __brushBlendMode = value;\n}\n\npublic function get executionTime():int\n{\n    return __executionTime;\n}\n\npublic function set executionTime(value:int):void\n{\n    __executionTime = value;\n__normalizedExecutionTime = value;\n}\n\npublic function get scaledExecutionTime():int\n{\n    return __executionTime * __timeScale;\n}\n\npublic function get brushAlpha():Number\n{\n    return __brushAlpha;\n}\n\npublic function set brushAlpha(value:Number):void\n{\n    __brushAlpha = value;\n}\n\npublic function get brushRotation():Number\n{\n    return __brushRotation;\n}\n\npublic function set brushRotation(value:Number):void\n{\n    __brushRotation = value;\n}\n\npublic function get timeScale():Number\n{\n    return __timeScale;\n}\n\npublic function set timeScale(value:Number):void\n{\n    __timeScale = value;\n}\n\npublic function get layerID():String\n{\n    return __layerID;\n}\n\npublic function set layerID(value:String):void\n{\n    __layerID = value;\n}\n\n//NormalizedExecutionTime seems to be the same as regular executionTime\n\npublic function get normalizedExecutionTime():int\n{\n    return __normalizedExecutionTime;\n}\n\n\n\npublic function get scaledNormalizedExecutionTime():int\n{\n    return __normalizedExecutionTime * __timeScale;\n}\n\n\npublic function get generatedCommand():Boolean\n{\n    return __generatedCommand;\n}\n\npublic function set generatedCommand(value:Boolean):void\n{\n    __generatedCommand = value;\n}\n\npublic function get x():Number { return __location.x}\npublic function get y():Number { return __location.y}\n\npublic function get unitID():int\n{\n    return __unitID;\n}\n\npublic function set unitID(value:int):void\n{\n    __unitID = value;\n}\n\npublic function get lineLength():Number\n{\n    return __lineLength;\n}\n\npublic function set lineLength(value:Number):void\n{\n    __lineLength = value;\n}\n\npublic function get prevCommand():WwDrawingHistoryBrushCommand\n{\n    return __prevCommand;\n}\n\npublic function set prevCommand(value:WwDrawingHistoryBrushCommand):void\n{\n    __prevCommand = value;\n}\n\npublic function get rendered():Boolean\n{\n    return __rendered;\n}\n\npublic function set rendered(value:Boolean):void\n{\n    __rendered = value;\n}\n\n// Update Methods\n\npublic function updateBrushId(value:String):String\n{\n    if (value) { __brushID = value; return value }\n    else { return __brushID }\n}\n\npublic function updateUintColor(value:uint):uint\n{\n    if (value) { __uintColor = value; return value }\n    else { return __uintColor }\n}\n\npublic function updateUnitID(value:int):int\n{\n    if (value) { __unitID = value; return value }\n    else { return __unitID }\n}\n\npublic function updateLayerID(value:String):String\n{\n    if (value) { __layerID = value; return value }\n    else { return __layerID }\n}\n\npublic function updateExecutionTime(value:int):int\n{\n    if (value >= 0) { __executionTime = value; return value }\n    else { return __executionTime }\n}\n\npublic function updateBrushScale(value:Number):Number\n{\n    if (value) { __brushScale = value; return value }\n    else { return __brushScale }\n}\n\npublic function updateBlendMode(value:String):String\n{\n    if (value) { __brushBlendMode = value; return value }\n    else { return __brushBlendMode }\n}\n\npublic function updateBrushAlpha(value:Number):Number\n{\n    if (value) { __brushAlpha = value; return value }\n    else { return __brushAlpha }\n}\n\npublic function updateBrushRotation(value:Number):Number\n{\n    if (value) { __brushRotation = value; return value }\n    else { return __brushRotation }\n}\n\npublic function updateX(value:int):int\n{\n    if (!location) { location = new Point(0,0); }\n\n    if (value) { __location.x = value; return value }\n    else { return __location.x }\n}\n\npublic function updateY(value:int):int\n{\n    if (!location) { location = new Point(0,0); }\n\n    if (value) { __location.y = value; return value }\n    else { return __location.y }\n}\n\n\n//Redundancy Methods\n\npublic function checkRedundancyOfBrushID(data_object:Object, property:String, value:String):void\n{\n    if (value == __brushID) { }\nelse { __brushID = value; data_object[property] = __brushID }\n}\n\npublic function checkRedundancyOfUintColor(data_object:Object, property:String, value:uint):void\n{\n    if (value == __uintColor) { }\nelse { __uintColor = value; data_object[property] = __uintColor }\n}\n\npublic function checkRedundancyOfUnitID(data_object:Object, property:String, value:int):void\n{\n    if (value == __unitID) { }\nelse { __unitID = value; data_object[property] = __unitID }\n}\n\npublic function checkRedundancyOfLayerID(data_object:Object, property:String, value:String):void\n{\n    if (value == __layerID) { }\nelse { __layerID = value; data_object[property] = __layerID }\n}\n\npublic function checkRedundancyOfExecutionTime(data_object:Object, property:String, value:int):void\n{\n    //always include time parameter. SAR:150619\n    if (false && value == __executionTime) { }\nelse { __executionTime = value; data_object[property] = __executionTime }\n}\n\npublic function checkRedundancyOfBrushScale(data_object:Object, property:String, value:Number):void\n{\n    if (value == __brushScale) { }\nelse { __brushScale = value; data_object[property] = __brushScale }\n}\n\npublic function checkRedundancyOfBrushBlendMode(data_object:Object, property:String, value:String):void\n{\n    if (value == __brushBlendMode) { }\nelse { __brushBlendMode = value; data_object[property] = __brushBlendMode }\n}\n\npublic function checkRedundancyOfBrushAlpha(data_object:Object, property:String, value:Number):void\n{\n    if (value == __brushAlpha) { }\nelse { __brushAlpha = value; data_object[property] = __brushAlpha }\n}\n\npublic function checkRedundancyOfBrushRotation(data_object:Object, property:String, value:Number):void\n{\n    if (value == __brushRotation) { }\nelse { __brushRotation = value; data_object[property] = __brushRotation }\n}\n\npublic function checkRedundancyOfGeneratedCommand(data_object:Object, property:String, value:Boolean):void\n{\n    if (value == __generatedCommand) { }\nelse { __generatedCommand = value; data_object[property] = __generatedCommand }\n}\n\npublic function checkRedundancyOfX(data_object:Object, property:String, value:Number):void\n{\n    if (!location) { location = new Point(0,0); }\n\nif (value == __location.x) { }\nelse { __location.x = value; data_object[property] = __location.x }\n}\n\npublic function checkRedundancyOfY(data_object:Object, property:String, value:Number):void\n{\n    if (!location) { location = new Point(0,0); }\n\nif (value == __location.y) { }\nelse { __location.y = value; data_object[property] =  __location.y }\n}\n}\n}\n\n*/"],"sourceRoot":"/source/"}