{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/**\n * Created by andrew on 7/7/15.\n */\n\nimport Point from './point';\nimport Rect from './rect';\nimport getTimer from './get-timer';\nimport WwSprite from './ww-sprite';\nimport WwBrush from './ww-brush';\nimport WwDrawingHistoryBrushCommand from './ww-drawing-history-brush-command';\nimport WwDeviceInfo from './ww-device-info';\nimport WwDrawingHistoryUnit from './ww-drawing-history-unit';\nimport WwDrawingBrushManager from './ww-drawing-brush-manager';\nimport WwDrawingHistory from './ww-drawing-history';\nimport WwDrawingHistoryRenderer from './ww-drawing-history-renderer';\nimport WwDrawingHistoryLoader from './ww-drawing-history-loader';\n\nimport TestData from '../images/drw_1432296509856_base_ALL.json';\nimport TestData2 from '../images/drw_1440163114487_base_ALL.json';\n\n\nlet canvas = document.getElementById(\"test-canvas\");\nlet ctx = canvas.getContext(\"2d\");\nctx.clearRect(0, 0, canvas.width, canvas.height);\n//ctx.fillStyle = \"#0000ff\";\n//ctx.fillRect(10, 10, 100, 100);\n\nconsole.log(`getTimer: ${getTimer()}`);\nconsole.log(`point: ${new Point().toString()}`);\n\nlet test_sprite = new WwSprite(1, 2);\nconsole.log(`WwSprite: ${test_sprite}`);\ntest_sprite.loadImageWithURLAndCallback('./images/player.png', onSpriteImageLoaded);\n\nlet eye_sprite = new WwSprite(0, 0);\nconsole.log(`WwSprite: ${eye_sprite}`);\neye_sprite.loadImageWithURLAndCallback('./images/eye_500.png', onEyeImageLoaded);\n\nlet test_brush = new WwBrush();\nconsole.log(`WwBrush: ${test_brush}`);\ntest_brush.loadImageWithURLAndCallback('./images/brushes/brush_circle.png', onBrushImageLoaded);\n\nlet test_point1 = new Point(0,0);\nlet test_point2 = new Point(1,1);\nconsole.log(`Distance between points: ${Point.distance(test_point1,test_point2)}`);\n\nlet device_info = WwDeviceInfo.instance;\nconsole.log(`DeviceInfo: AssetScaleFactor: ${device_info.assetScaleFactor}`);\n\nlet brush_command = new WwDrawingHistoryBrushCommand('hard', new Point(100, 100),  getTimer());\nconsole.log(`${brush_command.toString()}`);\n\nlet drawing_history_unit = new WwDrawingHistoryUnit();\nlet test_unit = TestData.units[0];\nlet test_commands = test_unit.commands;\nlet base_command = new WwDrawingHistoryBrushCommand('hard', new Point(0,0));\ntest_commands.forEach(data_object => {\n    //let command = new WwDrawingHistoryBrushCommand(c.bid, new Point(c.x, c.y), c.t, c.c, c.s, 1.0, c.bm, c.a, c.r, c.lid);\n    let command = WwDrawingHistoryBrushCommand.clone(base_command, data_object);\n\n    drawing_history_unit.addCommand(command);\n    base_command = command;\n});\n//console.log(drawing_history_unit.toString());\n\nWwDrawingBrushManager.instance.init(onBrushesLoaded);\n\nfunction onBrushesLoaded(brushes) {\n    console.log(`onBrushesLoaded:`);\n    console.log(brushes);\n\n    /*\n    let history = new WwDrawingHistory();\n    let base_command = new WwDrawingHistoryBrushCommand('hard', new Point(0,0));\n\n    TestData2.units.forEach(unit_data => {\n        let unit = new WwDrawingHistoryUnit();\n        unit.layerId = unit_data.lid;\n        unit.sessionId = unit_data.ses;\n        unit.startTime = unit_data.start;\n        unit.id = unit_data.id;\n\n\n        unit_data.commands.forEach(command_data => {\n            if (!command_data.t) {\n                command_data.t = 0;\n            }\n            let command = WwDrawingHistoryBrushCommand.clone(base_command, command_data);\n            //console.log(command.toStringMin());\n            unit.addCommand(command);\n            base_command = command;\n        });\n        history.addUnit(unit);\n    });\n    //history.addUnit(drawing_history_unit);\n    //console.log(history.toString());\n    */\n\n    let historyLoader = new WwDrawingHistoryLoader();\n    historyLoader.parseDrawingData(TestData2);\n\n    let render_rect = new Rect(110, 390, 500, 500);\n\n    let renderer = new WwDrawingHistoryRenderer(historyLoader.history, ctx, render_rect, true, 0.8);\n    //renderer.renderHistory();\n    //renderer.renderHistoryWithTimeRange(0, 2000);\n\n\n    //renderer.renderHistoryWithDuration(500);\n\n\n    let intervalId = setInterval(() => {\n        if (renderer.ended) {\n            clearInterval(intervalId);\n        }\n        else {\n            renderer.renderHistoryWithDuration(99);\n        }\n    }, 33);\n\n}\n\nfunction onSpriteImageLoaded(sprite) {\n    console.log(`onSpriteImageLoaded: ${sprite}`);\n    //sprite.draw(ctx);\n}\n\nfunction onEyeImageLoaded(sprite) {\n    console.log(`onEyeImageLoaded: ${sprite}`);\n    sprite.x = 390;\n    sprite.y = 110;\n    sprite.draw(ctx);\n}\n\nfunction onBrushImageLoaded(brush) {\n    console.log(`onBrushImageLoaded: ${brush}`);\n    //brush.draw(ctx);\n}\n\n\nexport default {Point, getTimer};"],"sourceRoot":"/source/"}